<html>

<head>
    <title>Demo Stacks App</title>
</head>

<body>
    <h2>LNSwap Widget Demo</h2>
    <!-- <h3>Welcome to Sample Stacks App</h3> -->
    <h3>Use Case - 1: Send Bitcoin on Lightning and receive STX</h3>
    <p>Note: User will need a small amount of STX (0.1-0.5 STX) in their wallet to claim the funds</p>
    <div style="margin:4px;">
        <span>User's STX Address</span>
        <input type="text" class="stxaddress" placeholder="SP27SD3H5TTZXPBFXHN1ZNMFJ3HNE2070QWHH3BXX" style="min-width: 400px;"/>
    </div>
    <div style="margin:4px;">
        <span>STX Amount</span>
        <input type="number" class="stxamount" placeholder="5"/>
    </div>
    <div><button onclick="startSwap();">Launch LNSwap Widget</button></div>


    <h3>Use Case - 2: Mint NFT on Stacks with Lightning</h3>
    <p>Note: Swap is not trustless.</p>
    <div style="margin:4px;">
        <span>NFT Contract Address</span>
        <input type="text" id="contractAddress" placeholder="SP2507VNQZC9VBXM7X7KB4SF4QJDJRSWHG4V39WPY.stacks-roots-v2" style="min-width: 500px;"/>
    </div>
    <div style="margin:4px;">
        <span>User's STX Address</span>
        <input type="text" class="stxaddress" placeholder="SP27SD3H5TTZXPBFXHN1ZNMFJ3HNE2070QWHH3BXX" style="min-width: 400px;"/>
    </div>
    <div style="margin:4px;">
        <span>STX Amount</span>
        <input type="number" class="stxamount" placeholder="5"/>
    </div>
    <div style="margin:4px;">
        <span>NFT Contract Claim/Mint Signature</span>
        <input type="text" id="contractSignature" placeholder="claim-for" value="claim-for" style="min-width: 400px;"/>
    </div>
    <div><button onclick="startDirectSwap();">Launch LNSwap Widget</button></div>

    <h2>Integration Instructions for Stacks App Developers</h2>
    <!-- <p>Stacks App would integrate the swap tool as below:</p> -->

    <iframe
    src="https://carbon.now.sh/embed?bg=rgba%28171%2C+184%2C+195%2C+1%29&t=seti&wt=none&l=auto&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=56px&ph=56px&ln=false&fl=1&fm=Hack&fs=14px&lh=133%25&si=false&es=2x&wm=false&code=%253Cdiv%2520id%253D%2522root%2522%253E%253C%252Fdiv%253E%250A%253Cscript%2520src%253D%2522https%253A%252F%252Flnswap-widget.vercel.app%252Fwidget.js%2522%2520%2520%250A%2509id%253D%2522LNSwap-Widget-Script%2522%2520defer%2520%250A%2520%2520%2520%2520data-config%253D%2522%257B%27name%27%253A%2520%27lnswap%27%252C%2520%27config%27%253A%2520%257B%27targetElementId%27%253A%2520%27root%27%257D%257D%2522%253E%250A%253C%252Fscript%253E%250A%250A%252F%252F%2520Start%2520the%2520Swap%250Alnswap%28%27swap%27%252C%2520%250A%2520%2520%2520%2520%2520%2520%2520%27swapType%27%252C%2520%250A%2520%2520%2520%2520%2520%2520%2520%27user%2520stx%2520address%27%252C%2520%250A%2520%2520%2520%2520%2520%2520%2520%27amount%2520in%2520STX%27%252C%2520%250A%2520%2520%2520%2520%2520%2520%2520%27%28only%2520for%2520mintnft%29%2520NFT%2520Contract%2520Address%27%252C%250A%2520%2520%2520%2520%2520%2520%2520%27%28only%2520for%2520mintnft%29%2520NFT%2520Mint%2520Function%2520Name%27%29%253B%250A%250A%252F%252F%2520e.g.%2520Mint%2520NFT%2520with%2520Lightning%2520%250Alnswap%28%27swap%27%252C%2520%27mintnft%27%252C%2520%27ST27SD3H5TTZXPBFXHN1ZNMFJ3HNE2070QX7ZN4FF%27%252C%252025%252C%2520%27ST27SD3H5TTZXPBFXHN1ZNMFJ3HNE2070QX7ZN4FF.stacks-roots-v2%27%252C%2520%27claim-for%27%29%253B%250A%250A%252F%252F%2520e.g.%2520Trustless%2520Swap%2520Lightning%2520to%2520STX%250Alnswap%28%27swap%27%252C%2520%27reversesubmarine%27%252C%2520%27ST27SD3H5TTZXPBFXHN1ZNMFJ3HNE2070QX7ZN4FF%27%252C%25205%29%253B"
    style="width: 857px; height: 558px; border:0; transform: scale(1); overflow:hidden;"
    sandbox="allow-scripts allow-same-origin">
  </iframe>

    <!-- <pre><code>
        &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;
        &lt;script src=&quot;https://lnswap-widget.vercel.app/widget.js&quot;  
                id=&quot;LNSwap-Widget-Script&quot; 
                data-config=&quot;{'name': 'lnswap', 'config': {'targetElementId': 'root'}}&quot; &gt;
        &lt;/script&gt;
    </code></pre>
    <p>Merchant (NFT Market) would then initiate the swap in their frontend as below:
        <pre><code>
            lnswap('swap', 'user stx address', 'amount in STX');<br/>
        e.g. lnswap('swap', 'SP1GH2VFAZ7ZB02JHBTMJSQYKJ83ESCNBZ0S3198R', '50');
        </code></pre>
    </p> -->

    <div id="root"></div>
    <script src="./widget.js"  id="LNSwap-Widget-Script" data-config="{'name': 'lnswap', 'config': {'targetElementId': 'root'}}" ></script>
    <script>
        function startSwap(){
            const stxaddress = document.getElementsByClassName('stxaddress')[0].value;
            const stxamount = document.getElementsByClassName('stxamount')[0].value;
            if(!stxaddress || !stxamount) {
                alert('please provide required values');
                return false;
            }
            console.log('starting lnswap with ', stxaddress, stxamount);
            lnswap('swap', 'reversesubmarine', stxaddress, stxamount);
        }
        function startDirectSwap(){
            const stxaddress = document.getElementsByClassName('stxaddress')[1].value;
            const stxamount = document.getElementsByClassName('stxamount')[1].value;
            const contractAddress = document.getElementById('contractAddress').value;
            const contractSignature = document.getElementById('contractSignature').value;
            if(!stxaddress || !stxamount || !contractAddress || !contractSignature) {
                alert('please provide required values');
                return false;
            }
            console.log('starting lnswap with ', stxaddress, stxamount);
            lnswap('swap', 'mintnft', stxaddress, stxamount, contractAddress, contractSignature);
        }
    </script>
</body>

</html>