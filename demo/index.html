<html>

<head>
    <title>Demo Stacks App</title>
    <!-- <link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
    /> -->
</head>

<body>
    <h2>LNSwap Widget Demo</h2>
    <!-- <h3>Welcome to Sample Stacks App</h3> -->
    <h3>Use Case - 1: Send Bitcoin on Lightning and receive STX</h3>
    <p>Note: User will need a small amount of STX (0.1-0.5 STX) in their wallet to claim the funds</p>
    <!-- <p style="color: red;">Note 2: Disabled for now as we work on resolving @stacks/connect package conflict between host and widget</p> -->
    <div style="margin:4px;">
        <span>User's STX Address</span>
        <input type="text" class="stxaddress" placeholder="SP27SD3H5TTZXPBFXHN1ZNMFJ3HNE2070QWHH3BXX" style="min-width: 400px;"/>
    </div>
    <div style="margin:4px;">
        <span>STX Amount</span>
        <input type="number" class="stxamount" placeholder="5"/>
    </div>
    <div><button onclick="startSwap();">Launch LNSwap Widget</button></div>


    <!-- <h3>Use Case - 2: (Custodial) Mint NFT on Stacks with Lightning</h3>
    <p>Note: Swap is not trustless.</p>
    <div style="margin:4px;">
        <span>NFT Contract Address</span>
        <input type="text" id="contractAddress" placeholder="SP2507VNQZC9VBXM7X7KB4SF4QJDJRSWHG4V39WPY.stacks-roots-v2" style="min-width: 500px;"/>
    </div>
    <div style="margin:4px;">
        <span>User's STX Address</span>
        <input type="text" class="stxaddress" placeholder="SP27SD3H5TTZXPBFXHN1ZNMFJ3HNE2070QWHH3BXX" style="min-width: 400px;"/>
    </div>
    <div style="margin:4px;">
        <span>STX Amount</span>
        <input type="number" class="stxamount" placeholder="5"/>
    </div>
    <div style="margin:4px;">
        <span>NFT Contract Claim/Mint Signature</span>
        <input type="text" id="contractSignature" placeholder="claim-for" value="claim-for" style="min-width: 400px;"/>
    </div>
    <div><button onclick="startDirectSwap();">Launch LNSwap Widget</button></div> -->


    <h3>Use Case - 2: (Non-Custodial) Mint NFT on Stacks with Lightning</h3>
    <div style="margin:4px;">
        <span>NFT Contract Address</span>
        <input type="text" id="nccontractAddress" placeholder="SP2507VNQZC9VBXM7X7KB4SF4QJDJRSWHG4V39WPY.stacks-roots-v2" style="min-width: 500px;"/>
    </div>
    <div style="margin:4px;">
        <span>User's STX Address</span>
        <input type="text" class="stxaddress" placeholder="SP27SD3H5TTZXPBFXHN1ZNMFJ3HNE2070QWHH3BXX" value="ST27SD3H5TTZXPBFXHN1ZNMFJ3HNE2070QX7ZN4FF" style="min-width: 400px;"/>
    </div>
    <div style="margin:4px;">
        <span>STX Amount</span>
        <input type="number" class="stxamount" placeholder="5" value="5"/>
    </div>
    <div style="margin:4px;">
        <span>NFT Contract Claim/Mint Signature</span>
        <input type="text" id="nccontractSignature" placeholder="claim" value="claim" style="min-width: 400px;"/>
    </div>
    <div style="margin:4px;">
        <span>Sponsored Transaction (Set to true if user has no STX)</span>
        <input type="text" id="sponsoredTx" placeholder="false" value="true"/>
    </div>
    <div><button onclick="startTriggerSwap();">Launch LNSwap Widget</button></div>

    <h3>Use Case - 3: Pay someone STX with Lightning</h3>
    <!-- <div style="margin:4px;">
        <span>NFT Contract Address</span>
        <input type="text" id="nccontractAddress" placeholder="SP2507VNQZC9VBXM7X7KB4SF4QJDJRSWHG4V39WPY.stacks-roots-v2" style="min-width: 500px;"/>
    </div> -->
    <div style="margin:4px;">
        <span>User's STX Address</span>
        <input type="text" class="stxaddress" placeholder="SP27SD3H5TTZXPBFXHN1ZNMFJ3HNE2070QWHH3BXX" style="min-width: 400px;" value="ST2507VNQZC9VBXM7X7KB4SF4QJDJRSWHG6ERHWB7"/>
    </div>
    <div style="margin:4px;">
        <span>STX Amount</span>
        <input type="number" class="stxamount" placeholder="5" value="5"/>
    </div>
    <div style="margin:4px;">
        <span>Receiver's STX Address</span>
        <input type="text" id="receiveraddress" placeholder="SP2507VNQZC9VBXM7X7KB4SF4QJDJRSWHG4V39WPY" style="min-width: 400px;" value="ST1GH2VFAZ7ZB02JHBTMJSQYKJ83ESCNBZ0PJ4MMQ"/>
    </div>
    <div style="margin:4px;">
        <span>STX Transfer Memo</span>
        <input type="text" id="stxmemo" placeholder="buy:xxx code:xxx" value="sample memo text" style="min-width: 400px;"/>
    </div>
    <div style="margin:4px;">
        <span>Sponsored Transaction (Set to true if user has no STX)</span>
        <input type="text" id="sttssponsoredTx" placeholder="false" value="false"/>
    </div>
    <div><button onclick="startTriggerTransferSwap();">Launch LNSwap Widget</button></div>

    <h3>Use Case - 4: Trustless Rewards with Lightning (e.g. Stacks Degens)</h3>
    <div style="margin:4px;">
        <span>Contract Address</span>
        <input type="text" class="contractAddress" placeholder="SP2507VNQZC9VBXM7X7KB4SF4QJDJRSWHG4V39WPY.trustless-rewards" value="ST38F25DF7V9VN1TP2Y9QP7A1KB4AF7PK8CHV4QF7.trustless-rewards" style="min-width: 500px;"/>
    </div>
    <div style="margin:4px;">
        <span>User's STX Address</span>
        <input type="text" class="stxaddress" placeholder="SP27SD3H5TTZXPBFXHN1ZNMFJ3HNE2070QWHH3BXX" value="ST27SD3H5TTZXPBFXHN1ZNMFJ3HNE2070QX7ZN4FF" style="min-width: 400px;"/>
    </div>
    <div style="margin:4px;">
        <span>STX Amount</span>
        <input type="number" class="stxamount" placeholder="5" value="5" />
    </div>
    <div style="margin:4px;">
        <span>Contract Call Type (create or join)</span>
        <input type="text" id="callType" placeholder="create" value="create" style="min-width: 400px;"/>
    </div>
    <div style="margin:4px;">
        <span>Other Contract Call Parameters (separated by comma)</span>
        <input type="text" id="callParameters" placeholder="description,price,factor,commission..." value="lobby description,5,5,5,bigApple,normal,intense,straight,2" style="min-width: 400px;"/>
    </div>
    <div style="margin:4px;">
        <span>Sponsored Transaction (Set to true if user has no STX)</span>
        <input type="text" class="sponsoredTx" placeholder="false" value="false"/>
    </div>
    <div><button onclick="startTriggerTrustlessRewards();">Launch LNSwap Widget</button></div>

    <h3>Use Case - 5: Stack STX with Lightning</h3>
    <div style="margin:4px;">
        <span>User's STX Address</span>
        <input type="text" class="stxaddress" placeholder="SP27SD3H5TTZXPBFXHN1ZNMFJ3HNE2070QWHH3BXX" value="ST27SD3H5TTZXPBFXHN1ZNMFJ3HNE2070QX7ZN4FF" style="min-width: 400px;"/>
    </div>
    <div style="margin:4px;">
        <span>STX Amount</span>
        <input type="number" class="stxamount" placeholder="5" value="5" />
    </div>
    <div style="margin:4px;">
        <span>Delegate Address</span>
        <input type="text" class="delegateAddress" placeholder="SP1K1A1PMGW2ZJCNF46NWZWHG8TS1D23EGH1KNK60" value="ST2507VNQZC9VBXM7X7KB4SF4QJDJRSWHG6ERHWB7" style="min-width: 500px;"/>
    </div>
    <div style="margin:4px; display: none;">
        <span>Sponsored Transaction (Set to true if user has no STX)</span>
        <input type="text" class="sponsoredTx" placeholder="false" value="false"/>
    </div>
    <div><button onclick="startTriggerStacking();">Launch LNSwap Widget</button></div>

    <h4 style="margin-bottom: 2px;">Try on mainnet now: Mint a Cube NFT with 1-click via Lightning</h4>
    <div>
        <!-- <p></p> -->
        <div style="margin:4px; margin-left:0;">
            <span>Your Hiro Wallet STX Address</span>
            <input type="text" class="stxaddress" placeholder="SP27SD3H5TTZXPBFXHN1ZNMFJ3HNE2070QWHH3BXX" style="min-width: 400px;"/>
        </div>
        <button onclick="startTriggerSwapDemo();">Mint a Cube</button>
    </div>

    <h3>Please refer to the <a href="https://docs.lnswap.org/quick-start" target="_blank">https://docs.lnswap.org</a> for integration Instructions</h3>
    <!-- <p>Stacks App would integrate the swap tool as below:</p> -->

    <!-- <iframe
    src="https://carbon.now.sh/embed?bg=rgba%28171%2C+184%2C+195%2C+1%29&t=seti&wt=none&l=auto&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=56px&ph=56px&ln=false&fl=1&fm=Hack&fs=14px&lh=133%25&si=false&es=2x&wm=false&code=%253Cdiv%2520id%253D%2522root%2522%253E%253C%252Fdiv%253E%250A%253Cscript%2520src%253D%2522https%253A%252F%252Fwidget.lnswap.org%252Fwidget.js%2522%2520%2520%250A%2509id%253D%2522LNSwap-Widget-Script%2522%2520defer%2520%250A%2520%2520%2520%2520data-config%253D%2522%257B%27name%27%253A%2520%27lnswap%27%252C%2520%27config%27%253A%2520%257B%27targetElementId%27%253A%2520%27root%27%257D%257D%2522%253E%250A%253C%252Fscript%253E%250A%250A%252F%252F%2520Start%2520the%2520Swap%250Alnswap%28%27swap%27%252C%2520%250A%2520%2520%2520%2520%2520%2520%2520%27swapType%27%252C%2520%250A%2520%2520%2520%2520%2520%2520%2520%27user%2520stx%2520address%27%252C%2520%250A%2520%2520%2520%2520%2520%2520%2520%27amount%2520in%2520STX%27%252C%2520%250A%2520%2520%2520%2520%2520%2520%2520%27%28only%2520for%2520mintnft%29%2520NFT%2520Contract%2520Address%27%252C%250A%2520%2520%2520%2520%2520%2520%2520%27%28only%2520for%2520mintnft%29%2520NFT%2520Mint%2520Function%2520Name%27%252C%250A%2520%2520%2520%2520%2520%2520%2520%27%28optional%29%2520sponsored%2520transaction%27%29%253B%250A%250A%252F%252F%2520e.g.%2520%28Non-Custodial%29%2520Mint%2520NFT%2520with%2520Lightning%2520%250Alnswap%28%27swap%27%252C%2520%250A%2520%2520%2520%2520%2520%2520%2520%27triggerswap%27%252C%2520%250A%2520%2520%2520%2520%2520%2520%2520%27ST27SD3H5TTZXPBFXHN1ZNMFJ3HNE2070QX7ZN4FF%27%252C%2520%250A%2520%2520%2520%2520%2520%2520%252025%252C%2520%250A%2520%2520%2520%2520%2520%2520%2520%27ST27SD3H5TTZXPBFXHN1ZNMFJ3HNE2070QX7ZN4FF.stacks-roots-v2%27%252C%250A%2520%2520%2520%2520%2520%2520%2520%27true%27%29%253B%250A%250A%252F%252F%2520e.g.%2520Trustless%2520Swap%2520Lightning%2520to%2520STX%250Alnswap%28%27swap%27%252C%2520%250A%2520%2520%2520%2520%2520%2520%2520%27reversesubmarine%27%252C%2520%250A%2520%2520%2520%2520%2520%2520%2520%27ST27SD3H5TTZXPBFXHN1ZNMFJ3HNE2070QX7ZN4FF%27%252C%2520%250A%2520%2520%2520%2520%2520%2520%25205%29%253B%250A%250A%252F%252F%2520e.g.%2520%28Custodial%29%2520Mint%2520NFT%2520with%2520Lightning%2520%250Alnswap%28%27swap%27%252C%2520%250A%2520%2520%2520%2520%2520%2520%2520%27mintnft%27%252C%2520%250A%2520%2520%2520%2520%2520%2520%2520%27ST27SD3H5TTZXPBFXHN1ZNMFJ3HNE2070QX7ZN4FF%27%252C%2520%250A%2520%2520%2520%2520%2520%2520%252025%252C%2520%250A%2520%2520%2520%2520%2520%2520%2520%27ST27SD3H5TTZXPBFXHN1ZNMFJ3HNE2070QX7ZN4FF.stacks-roots-v2%27%252C%250A%2520%2520%2520%2520%2520%2520%2520%27claim-for%27%29%253B"
    style="width: 857px; height: 856px; border:0; transform: scale(1); overflow:hidden;"
    sandbox="allow-scripts allow-same-origin">
  </iframe> -->

    <h2>Screenshots & Video Demo</h2>
    <div>
        <img src="./rsss.png" style="height: 500px;" />
        <img src="./nftss.png" style="height: 500px;" />
     </div>
    <div style="margin: 10px;">
        <iframe width="560" height="315" src="https://www.youtube.com/embed/2xuSU0XJU0E" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
    <!-- <pre><code>
        &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;
        &lt;script src=&quot;https://lnswap-widget.vercel.app/widget.js&quot;  
                id=&quot;LNSwap-Widget-Script&quot; 
                data-config=&quot;{'name': 'lnswap', 'config': {'targetElementId': 'root'}}&quot; &gt;
        &lt;/script&gt;
    </code></pre>
    <p>Merchant (NFT Market) would then initiate the swap in their frontend as below:
        <pre><code>
            lnswap('swap', 'user stx address', 'amount in STX');<br/>
        e.g. lnswap('swap', 'SP1GH2VFAZ7ZB02JHBTMJSQYKJ83ESCNBZ0S3198R', '50');
        </code></pre>
    </p> -->

    <div id="root"></div>
    <script src="./widget.js"  id="LNSwap-Widget-Script" data-config="{'name': 'lnswap', 'config': {'targetElementId': 'root'}}" ></script>
    <script>
        function startSwap(){
            const stxaddress = document.getElementsByClassName('stxaddress')[0].value;
            const stxamount = document.getElementsByClassName('stxamount')[0].value;
            if(!stxaddress || !stxamount) {
                alert('please provide required values');
                return false;
            }
            console.log('starting lnswap with ', stxaddress, stxamount);
            lnswap('swap', 'reversesubmarine', stxaddress, stxamount);
        }
        // function startDirectSwap(){
        //     const stxaddress = document.getElementsByClassName('stxaddress')[1].value;
        //     const stxamount = document.getElementsByClassName('stxamount')[1].value;
        //     const contractAddress = document.getElementById('contractAddress').value;
        //     const contractSignature = document.getElementById('contractSignature').value;
        //     if(!stxaddress || !stxamount || !contractAddress || !contractSignature) {
        //         alert('please provide required values');
        //         return false;
        //     }
        //     console.log('starting lnswap with ', stxaddress, stxamount);
        //     lnswap('swap', 'mintnft', stxaddress, stxamount, contractAddress, contractSignature);
        // }
        function startTriggerSwap(){
            const stxaddress = document.getElementsByClassName('stxaddress')[1].value;
            const stxamount = document.getElementsByClassName('stxamount')[1].value;
            const contractAddress = document.getElementById('nccontractAddress').value;
            const contractSignature = document.getElementById('nccontractSignature').value;
            const sponsoredTx = document.getElementById('sponsoredTx').value;
            if(!stxaddress || !stxamount || !contractAddress || !contractSignature) {
                alert('please provide required values');
                return false;
            }
            console.log('starting triggerswap with ', stxaddress, stxamount);
            lnswap('swap', 'triggerswap', stxaddress, stxamount, contractAddress, contractSignature, sponsoredTx);
        }
        function startTriggerTransferSwap(){
            const stxaddress = document.getElementsByClassName('stxaddress')[2].value;
            const stxamount = document.getElementsByClassName('stxamount')[2].value;
            const receiveraddress= document.getElementById('receiveraddress').value;
            const stxmemo = document.getElementById('stxmemo').value;
            const sponsoredTx = document.getElementById('sttssponsoredTx').value;
            if(!stxaddress || !stxamount || !receiveraddress) {
                alert('please provide required values');
                return false;
            }
            console.log('starting triggertransferswap with ', stxaddress, stxamount, receiveraddress, sponsoredTx, stxmemo);
            lnswap('swap', 'triggertransferswap', stxaddress, stxamount, '', '', sponsoredTx, receiveraddress, stxmemo);
        }
        function startTriggerSwapDemo(){
            const stxaddress = document.getElementsByClassName('stxaddress')[4].value;
            const stxamount = 5;
            const contractAddress = 'SP27SD3H5TTZXPBFXHN1ZNMFJ3HNE2070QWHH3BXX.cube';
            const contractSignature = 'claim';
            const sponsoredTx = 'false';
            if(!stxaddress || !stxamount || !contractAddress || !contractSignature) {
                alert('please provide required values');
                return false;
            }
            console.log('starting triggerswapdemo with ', stxaddress, stxamount);
            lnswap('swap', 'triggerswap', stxaddress, stxamount, contractAddress, contractSignature, sponsoredTx);
        }
        function startTriggerTrustlessRewards(){
            const stxaddress = document.getElementsByClassName('stxaddress')[3].value;
            const stxamount = document.getElementsByClassName('stxamount')[3].value;
            const contractAddress = document.getElementsByClassName('contractAddress')[0].value;
            const callType = document.getElementById('callType').value;
            const callParameters = document.getElementById('callParameters').value;
            const sponsoredTx = document.getElementsByClassName('sponsoredTx')[0].value;
            if(!stxaddress || !stxamount || !callParameters) {
                alert('please provide required values');
                return false;
            }
            console.log('starting startTriggerTrustlessRewards with ', stxaddress, stxamount, contractAddress, sponsoredTx, callType, callParameters.split(','));
            lnswap('swap', `sd${callType}game`, stxaddress, stxamount, contractAddress, '', sponsoredTx, '', '', callParameters.split(','));
        }
        function startTriggerStacking(){
            const stxaddress = document.getElementsByClassName('stxaddress')[4].value;
            const stxamount = document.getElementsByClassName('stxamount')[4].value;
            const sponsoredTx = document.getElementsByClassName('sponsoredTx')[1].value;
            const delegateAddress = document.getElementsByClassName('delegateAddress')[0].value;
            if(!stxaddress || !stxamount || !delegateAddress) {
                alert('please provide required values');
                return false;
            }
            console.log('starting startTriggerStacking with ', stxaddress, stxamount, sponsoredTx, delegateAddress);
            lnswap('swap', `stacking`, stxaddress, stxamount, delegateAddress, '', sponsoredTx, '', '', '');
        }
        // listen to mint tx ID from the iframe
        window.onmessage = function(e) {
            // console.log('got cross-origin event ', e);
            if (e.data && e.data.target && e.data.target === 'lnswap') {
                console.log('received data from lnswap widget: ', e.data.data);
            }
        };
    </script>
</body>

</html>